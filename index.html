<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open My App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #manual-link {
            margin-top: 20px;
            display: block;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <h2>Redirecting to the app...</h2>
    <p>If you are not redirected automatically, click the button below:</p>

    <a id="manual-link" href="#">Open App Manually</a>

    <script>
        function getMobileOS() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if (/android/i.test(userAgent)) {
                return "android";
            } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return "ios";
            }
            return "unknown";
        }

        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        const os = getMobileOS();
        const screen = getQueryParam("screen") || "home";  // Default to "home" if no param is provided
        const env = getQueryParam("env") || "prod";  // "prod" or "dev"

        // Use different schemes for production and development
        const scheme = env === "dev" ? "rentofly-dev://" : "rentofly://";
        const appLink = `${scheme}${screen}`;

        let storeLink = "https://rentofly.com/";  // Default fallback

        if (os === "android") {
            storeLink = "https://play.google.com/store/apps/details?id=com.rentoflymobile";
        } else if (os === "ios") {
            storeLink = "https://apps.apple.com/in/app/rentofly/id6473688330";
        }

        // Set the manual link
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("manual-link").href = appLink;
        });

        // Try opening the app
        window.location.href = appLink;

        // Redirect to the store if the app is not installed (after 2s)
        setTimeout(() => {
            window.location.href = storeLink;
        }, 2000);
    </script>

</body>
</html>
